# ê°¤ë¼ ì—ì´ì „íŠ¸ ë§Œë“¤ê¸°

ì´ì œ Alfredë¥¼ ìœ„í•œ ëª¨ë“  í•„ìš”í•œ êµ¬ì„± ìš”ì†Œë¥¼ êµ¬ì¶•í–ˆìœ¼ë‹ˆ, ìš°ë¦¬ì˜ í™”ë ¤í•œ ê°¤ë¼ë¥¼ ì£¼ìµœí•˜ëŠ” ê²ƒì„ ë„ìš¸ ìˆ˜ ìˆëŠ” ì™„ì „í•œ ì—ì´ì „íŠ¸ë¡œ ëª¨ë“  ê²ƒì„ í†µí•©í•´ë³´ê² ìŠµë‹ˆë‹¤.

ì´ ì„¹ì…˜ì—ì„œëŠ” ì†ë‹˜ ì •ë³´ ê²€ìƒ‰, ì›¹ ê²€ìƒ‰, ë‚ ì”¨ ì •ë³´, Hub í†µê³„ ë„êµ¬ë¥¼ í•˜ë‚˜ì˜ ê°•ë ¥í•œ ì—ì´ì „íŠ¸ë¡œ ê²°í•©í•˜ê² ìŠµë‹ˆë‹¤.

## Alfred ì¡°ë¦½í•˜ê¸°: ì™„ì „í•œ ì—ì´ì „íŠ¸

ì´ì „ ì„¹ì…˜ì—ì„œ ë§Œë“  ëª¨ë“  ë„êµ¬ë¥¼ ë‹¤ì‹œ êµ¬í˜„í•˜ëŠ” ëŒ€ì‹ , `tools.py`ì™€ `retriever.py` íŒŒì¼ì— ì €ì¥í•œ ê° ëª¨ë“ˆì—ì„œ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤.

<Tip>
ì•„ì§ ë„êµ¬ë“¤ì„ êµ¬í˜„í•˜ì§€ ì•Šì•˜ë‹¤ë©´, <a href="./tools">tools</a>ì™€ <a href="./invitees">retriever</a> ì„¹ì…˜ìœ¼ë¡œ ëŒì•„ê°€ì„œ êµ¬í˜„í•˜ê³  `tools.py`ì™€ `retriever.py` íŒŒì¼ì— ì¶”ê°€í•˜ì„¸ìš”.
</Tip>

ì´ì „ ì„¹ì…˜ì—ì„œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë„êµ¬ë“¤ì„ ê°€ì ¸ì˜¤ê² ìŠµë‹ˆë‹¤:

<hfoptions id="agents-frameworks">
<hfoption id="smolagents">

```python
# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
import random
from smolagents import CodeAgent, InferenceClientModel

# ëª¨ë“ˆì—ì„œ ì»¤ìŠ¤í…€ ë„êµ¬ ê°€ì ¸ì˜¤ê¸°
from tools import DuckDuckGoSearchTool, WeatherInfoTool, HubStatsTool
from retriever import load_guest_dataset
```

ì´ì œ ì´ ëª¨ë“  ë„êµ¬ë“¤ì„ í•˜ë‚˜ì˜ ì—ì´ì „íŠ¸ë¡œ ê²°í•©í•´ë³´ê² ìŠµë‹ˆë‹¤:

```python
# Hugging Face ëª¨ë¸ ì´ˆê¸°í™”
model = InferenceClientModel()

# ì›¹ ê²€ìƒ‰ ë„êµ¬ ì´ˆê¸°í™”
search_tool = DuckDuckGoSearchTool()

# ë‚ ì”¨ ë„êµ¬ ì´ˆê¸°í™”
weather_info_tool = WeatherInfoTool()

# Hub í†µê³„ ë„êµ¬ ì´ˆê¸°í™”
hub_stats_tool = HubStatsTool()

# ì†ë‹˜ ë°ì´í„°ì…‹ ë¡œë“œ ë° ì†ë‹˜ ì •ë³´ ë„êµ¬ ì´ˆê¸°í™”
guest_info_tool = load_guest_dataset()

# ëª¨ë“  ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Alfred ìƒì„±
alfred = CodeAgent(
    tools=[guest_info_tool, weather_info_tool, hub_stats_tool, search_tool], 
    model=model,
    add_base_tools=True,  # ì¶”ê°€ ê¸°ë³¸ ë„êµ¬ ì¶”ê°€
    planning_interval=3   # 3ë‹¨ê³„ë§ˆë‹¤ ê³„íš ìˆ˜ë¦½ í™œì„±í™”
)
```

</hfoption>
<hfoption id="llama-index">

```python
# í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
from llama_index.core.agent.workflow import AgentWorkflow
from llama_index.llms.huggingface_api import HuggingFaceInferenceAPI

from tools import search_tool, weather_info_tool, hub_stats_tool
from retriever import guest_info_tool
```

ì´ì œ ì´ ëª¨ë“  ë„êµ¬ë“¤ì„ í•˜ë‚˜ì˜ ì—ì´ì „íŠ¸ë¡œ ê²°í•©í•´ë³´ê² ìŠµë‹ˆë‹¤:

```python
# Hugging Face ëª¨ë¸ ì´ˆê¸°í™”
llm = HuggingFaceInferenceAPI(model_name="Qwen/Qwen2.5-Coder-32B-Instruct")

# ëª¨ë“  ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ Alfred ìƒì„±
alfred = AgentWorkflow.from_tools_or_functions(
    [guest_info_tool, search_tool, weather_info_tool, hub_stats_tool],
    llm=llm,
)
```

</hfoption>
<hfoption id="langgraph">

```python
from typing import TypedDict, Annotated
from langgraph.graph.message import add_messages
from langchain_core.messages import AnyMessage, HumanMessage, AIMessage
from langgraph.prebuilt import ToolNode
from langgraph.graph import START, StateGraph
from langgraph.prebuilt import tools_condition
from langchain_huggingface import HuggingFaceEndpoint, ChatHuggingFace

from tools import DuckDuckGoSearchRun, weather_info_tool, hub_stats_tool
from retriever import guest_info_tool
```

ì´ì œ ì´ ëª¨ë“  ë„êµ¬ë“¤ì„ í•˜ë‚˜ì˜ ì—ì´ì „íŠ¸ë¡œ ê²°í•©í•´ë³´ê² ìŠµë‹ˆë‹¤:

```python
# ì›¹ ê²€ìƒ‰ ë„êµ¬ ì´ˆê¸°í™”
search_tool = DuckDuckGoSearchRun()

# ë„êµ¬ë¥¼ í¬í•¨í•œ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ ìƒì„±
llm = HuggingFaceEndpoint(
    repo_id="Qwen/Qwen2.5-Coder-32B-Instruct",
    huggingfacehub_api_token=HUGGINGFACEHUB_API_TOKEN,
)

chat = ChatHuggingFace(llm=llm, verbose=True)
tools = [guest_info_tool, search_tool, weather_info_tool, hub_stats_tool]
chat_with_tools = chat.bind_tools(tools)

# AgentStateì™€ Agent ê·¸ë˜í”„ ìƒì„±
class AgentState(TypedDict):
    messages: Annotated[list[AnyMessage], add_messages]

def assistant(state: AgentState):
    return {
        "messages": [chat_with_tools.invoke(state["messages"])],
    }

## ê·¸ë˜í”„
builder = StateGraph(AgentState)

# ë…¸ë“œ ì •ì˜: ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰
builder.add_node("assistant", assistant)
builder.add_node("tools", ToolNode(tools))

# ì—£ì§€ ì •ì˜: ì œì–´ íë¦„ì´ ì–´ë–»ê²Œ ì´ë™í•˜ëŠ”ì§€ ê²°ì •
builder.add_edge(START, "assistant")
builder.add_conditional_edges(
    "assistant",
    # ìµœì‹  ë©”ì‹œì§€ê°€ ë„êµ¬ë¥¼ í•„ìš”ë¡œ í•˜ë©´ ë„êµ¬ë¡œ ë¼ìš°íŒ…
    # ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì§ì ‘ ì‘ë‹µ ì œê³µ
    tools_condition,
)
builder.add_edge("tools", "assistant")
alfred = builder.compile()
```
</hfoption>
</hfoptions>

ì´ì œ ì—ì´ì „íŠ¸ë¥¼ ì‚¬ìš©í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!

## Alfred ì‚¬ìš©í•˜ê¸°: ì—”ë“œíˆ¬ì—”ë“œ ì˜ˆì œ

ì´ì œ Alfredê°€ í•„ìš”í•œ ëª¨ë“  ë„êµ¬ë¥¼ ê°–ì¶”ì—ˆìœ¼ë‹ˆ, ê°¤ë¼ ì¤‘ì— ë‹¤ì–‘í•œ ì‘ì—…ì„ ì–´ë–»ê²Œ ë„ìš¸ ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

### ì˜ˆì œ 1: ì†ë‹˜ ì •ë³´ ì°¾ê¸°

Alfredê°€ ì†ë‹˜ ì •ë³´ë¥¼ ì–´ë–»ê²Œ ë„ìš¸ ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

<hfoptions id="agents-frameworks">
<hfoption id="smolagents">

```python
query = "Tell me about 'Lady Ada Lovelace'"
response = alfred.run(query)

print("ğŸ© Alfredì˜ ì‘ë‹µ:")
print(response)
```

ì˜ˆìƒ ì¶œë ¥:

```
ğŸ© Alfredì˜ ì‘ë‹µ:
ê²€ìƒ‰í•œ ì •ë³´ì— ë”°ë¥´ë©´, Lady Ada LovelaceëŠ” ì¡´ê²½ë°›ëŠ” ìˆ˜í•™ìì´ì ì¹œêµ¬ì…ë‹ˆë‹¤. ê·¸ë…€ëŠ” ìˆ˜í•™ê³¼ ì»´í“¨íŒ… ë¶„ì•¼ì˜ ì„ êµ¬ì ì¸ ì—…ì ìœ¼ë¡œ ìœ ëª…í•˜ë©°, Charles Babbageì˜ í•´ì„ ê¸°ê´€ì— ëŒ€í•œ ì‘ì—…ìœ¼ë¡œ ì¸í•´ ì¢…ì¢… ìµœì´ˆì˜ ì»´í“¨í„° í”„ë¡œê·¸ë˜ë¨¸ë¡œ ê¸°ë ¤ì§‘ë‹ˆë‹¤. ê·¸ë…€ì˜ ì´ë©”ì¼ ì£¼ì†ŒëŠ” ada.lovelace@example.comì…ë‹ˆë‹¤.
```

</hfoption>
<hfoption id="llama-index">

```python
query = "Tell me about Lady Ada Lovelace. What's her background?"
response = await alfred.run(query)

print("ğŸ© Alfredì˜ ì‘ë‹µ:")
print(response.response.blocks[0].text)
```

ì˜ˆìƒ ì¶œë ¥:

```
ğŸ© Alfredì˜ ì‘ë‹µ:
Lady Ada LovelaceëŠ” ì˜êµ­ì˜ ìˆ˜í•™ìì´ì ì‘ê°€ë¡œ, Charles Babbageì˜ í•´ì„ ê¸°ê´€ì— ëŒ€í•œ ì‘ì—…ìœ¼ë¡œ ê°€ì¥ ì˜ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ê·¸ë…€ëŠ” ì´ ê¸°ê³„ê°€ ìˆœìˆ˜ ê³„ì‚° ì´ìƒì˜ ì‘ìš© í”„ë¡œê·¸ë¨ì„ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ìµœì´ˆë¡œ ì¸ì‹í•œ ì‚¬ëŒì´ì—ˆìŠµë‹ˆë‹¤.
```

</hfoption>
<hfoption id="langgraph">

```python
response = alfred.invoke({"messages": "Tell me about 'Lady Ada Lovelace'"})

print("ğŸ© Alfredì˜ ì‘ë‹µ:")
print(response['messages'][-1].content)
```

ì˜ˆìƒ ì¶œë ¥:

```
ğŸ© Alfredì˜ ì‘ë‹µ:
Ada LovelaceëŠ” Augusta Ada King, Lovelace ë°±ì‘ë¶€ì¸ìœ¼ë¡œë„ ì•Œë ¤ì§„ ì˜êµ­ì˜ ìˆ˜í•™ìì´ì ì‘ê°€ì…ë‹ˆë‹¤. 1815ë…„ 12ì›” 10ì¼ì— íƒœì–´ë‚˜ 1852ë…„ 11ì›” 27ì¼ì— ì‚¬ë§í–ˆìœ¼ë©°, ì œì•ˆëœ ê¸°ê³„ì‹ ë²”ìš© ì»´í“¨í„°ì¸ Charles Babbageì˜ í•´ì„ ê¸°ê´€ì— ëŒ€í•œ ì‘ì—…ìœ¼ë¡œ ìœ ëª…í•©ë‹ˆë‹¤. Ada LovelaceëŠ” 1843ë…„ì— í•´ì„ ê¸°ê´€ì„ ìœ„í•œ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ìµœì´ˆì˜ ì»´í“¨í„° í”„ë¡œê·¸ë˜ë¨¸ ì¤‘ í•œ ëª…ìœ¼ë¡œ ê¸°ë ¤ì§‘ë‹ˆë‹¤. ê·¸ë…€ëŠ” ë‹¹ì‹œ ì†Œìˆ˜ë§Œì´ ê·¸ë¬ë˜ ë°©ì‹ìœ¼ë¡œ ê¸°ê³„ê°€ ë‹¨ìˆœí•œ ê³„ì‚° ì´ìƒì˜ ìš©ë„ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì¬ë ¥ì„ ì¸ì‹í–ˆìŠµë‹ˆë‹¤. ê·¸ë…€ì˜ ì»´í“¨í„° ê³¼í•™ ë¶„ì•¼ì— ëŒ€í•œ ê¸°ì—¬ëŠ” ë¯¸ë˜ì˜ ë°œì „ì„ ìœ„í•œ ê¸°ë°˜ì„ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤. 10ì›”ì˜ ì–´ëŠ ë‚ ì€ Ada Lovelace Dayë¡œ ì§€ì •ë˜ì–´ ìˆìœ¼ë©°, Lovelaceì˜ ì„ êµ¬ì ì¸ ì‘ì—…ì—ì„œ ì˜ê°ì„ ë°›ì•„ ê³¼í•™ê³¼ ê¸°ìˆ  ë¶„ì•¼ì—ì„œì˜ ì—¬ì„±ë“¤ì˜ ê¸°ì—¬ë¥¼ ê¸°ë¦¬ëŠ” ë‚ ì…ë‹ˆë‹¤.
```

</hfoption>
</hfoptions>

### ì˜ˆì œ 2: ë¶ˆê½ƒë†€ì´ë¥¼ ìœ„í•œ ë‚ ì”¨ í™•ì¸

Alfredê°€ ë‚ ì”¨ ì •ë³´ë¥¼ ì–´ë–»ê²Œ ë„ìš¸ ìˆ˜ ìˆëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

<hfoptions id="agents-frameworks">
<hfoption id="smolagents">

```python
query = "What's the weather like in Paris tonight? Will it be suitable for our fireworks display?"
response = alfred.run(query)

print("ğŸ© Alfredì˜ ì‘ë‹µ:")
print(response)
```

ì˜ˆìƒ ì¶œë ¥ (ë¬´ì‘ìœ„ì„±ìœ¼ë¡œ ì¸í•´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŒ):
```
ğŸ© Alfredì˜ ì‘ë‹µ:
íŒŒë¦¬ì˜ ì˜¤ëŠ˜ ë°¤ ë‚ ì”¨ë¥¼ í™•ì¸í•´ë³´ì•˜ìŠµë‹ˆë‹¤. í˜„ì¬ ë§‘ê³  ê¸°ì˜¨ì€ 25Â°Cì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì¡°ê±´ì€ ì˜¤ëŠ˜ ë°¤ ë¶ˆê½ƒë†€ì´ì— ì™„ë²½í•©ë‹ˆë‹¤. ë§‘ì€ í•˜ëŠ˜ì€ í™”ë ¤í•œ ì‡¼ë¥¼ ìœ„í•œ ë›°ì–´ë‚œ ê°€ì‹œì„±ì„ ì œê³µí•  ê²ƒì´ë©°, ì¾Œì í•œ ê¸°ì˜¨ì€ ì†ë‹˜ë“¤ì´ ë¶ˆí¸í•¨ ì—†ì´ ì•¼ì™¸ í–‰ì‚¬ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆë„ë¡ ë³´ì¥í•  ê²ƒì…ë‹ˆë‹¤.
```

</hfoption>
<hfoption id="llama-index">

```python
query = "What's the weather like in Paris tonight? Will it be suitable for our fireworks display?"
response = await alfred.run(query)

print("ğŸ© Alfredì˜ ì‘ë‹µ:")
print(response)
```

ì˜ˆìƒ ì¶œë ¥:

```
ğŸ© Alfredì˜ ì‘ë‹µ:
íŒŒë¦¬ì˜ ì˜¤ëŠ˜ ë°¤ ë‚ ì”¨ëŠ” ë¹„ê°€ ì˜¤ê³  ê¸°ì˜¨ì€ 15Â°Cì…ë‹ˆë‹¤. ë¹„ê°€ ì˜¤ëŠ” ê²ƒì„ ê³ ë ¤í•  ë•Œ, ë¶ˆê½ƒë†€ì´ì—ëŠ” ì í•©í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

</hfoption>
</hfoptions> 