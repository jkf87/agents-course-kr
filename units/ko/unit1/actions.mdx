# 조치 : 에이전트가 환경에 참여할 수있게합니다 

<팁>
이 섹션에서는 AI 에이전트가 환경과 상호 작용하기 위해 AI 에이전트가 취하는 콘크리트 단계를 탐색합니다.

우리는 행동이 어떻게 표현되는지 (JSON 또는 코드 사용), 정지 및 구문 분석 접근법의 중요성을 다루고 다른 유형의 에이전트를 소개합니다.
</팁>

행동은 ** ai 에이전트가 환경과 상호 작용하는 데 취하는 구체적인 단계입니다 **.

정보를 찾기 위해 웹을 탐색하든 물리적 장치를 제어하든, 각 조치는 에이전트가 실행 한 고의적 인 작업입니다.

예를 들어, 고객 서비스를 지원하는 에이전트는 고객 데이터를 검색하거나 지원 기사를 제공하거나 인간 대표에게 문제를 전송할 수 있습니다.

## 에이전트 행동의 유형 

다르게 행동하는 여러 유형의 에이전트가 있습니다.

|에이전트 유형 |설명 |
|------------------------|--------------------------------------------------------------------------------------------------|
|JSON 에이전트 |취해야 할 조치는 JSON 형식으로 지정됩니다.|
|코드 에이전트 |에이전트는 외부에서 해석되는 코드 블록을 작성합니다.|
|기능을 부르는 에이전트 |각 조치에 대한 새 메시지를 생성하기 위해 미세 조정 된 JSON 에이전트의 하위 범주입니다.|

행동 자체는 많은 목적을 수행 할 수 있습니다.

|행동 유형 |설명 |
| ---------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|정보 수집 |웹 검색 수행, 데이터베이스 쿼리 또는 문서 검색.|
|도구 사용 |API 호출, 계산 실행 및 코드 실행.|
|환경 상호 작용 |디지털 인터페이스 조작 또는 물리적 장치 제어.|
|의사 소통 |채팅을 통해 사용자와 교류하거나 다른 에이전트와 협력합니다.|

LLM은 텍스트를 처리하고이를 사용하여 사용하려는 동작과 도구에 제공 할 매개 변수를 설명합니다.에이전트가 제대로 작동하려면 LLM은 모든 토큰을 방출하여 완전한 조치를 정의 한 후 새로운 토큰 생성을 중단해야합니다.이로 인해 LLM에서 에이전트로 제어가 통과되고 결과가 변형 가능하도록합니다.


## 정지 및 구문 분석 접근 

동작을 구현하기위한 핵심 방법 중 하나는 ** 정지 및 구문 분석 접근 방식 **입니다.이 방법은 에이전트의 출력이 구성되고 예측 가능하도록합니다.

1. ** 구조적 형식의 생성 ** :

에이전트는 의도 된 조치를 명확하고 사전 결정된 형식 (JSON 또는 코드)으로 출력합니다.

2. ** 추가 세대를 중단 ** :

조치를 정의하는 텍스트가 방출되면 ** LLM은 추가 토큰을 생성하지 않습니다 **.이것은 추가 또는 잘못된 출력을 방지합니다.

3. ** 출력을 구문 분석 ** :

외부 파서는 형식화 된 동작을 읽고, 호출 할 도구를 결정하고, 필요한 매개 변수를 추출합니다.

예를 들어, 날씨를 확인 해야하는 에이전트가 출력 될 수 있습니다.


```json
Thought: I need to check the current weather for New York.
Action :
{
  "action": "get_weather",
  "action_input": {"location": "New York"}
}
```
프레임 워크는 호출 할 기능의 이름과 적용 할 인수를 쉽게 구문 분석 할 수 있습니다.

이 명확하고 기계로 읽을 수있는 형식은 오류를 최소화하고 외부 도구가 에이전트의 명령을 정확하게 처리 할 수 ​​있도록합니다.

참고 : 기능을 부르는 에이전트는 지정된 기능이 올바른 인수로 호출되도록 각 동작을 구성하여 유사하게 작동합니다.
우리는 미래의 유닛에서 이러한 유형의 에이전트에 대해 더 깊이 뛰어들 것입니다.

## 코드 에이전트 

대체 접근법은 *코드 에이전트 *를 사용하는 것입니다.
아이디어는 : ** 간단한 JSON 객체를 출력하는 대신 ** 코드 에이전트는 ** 실행 가능한 코드 블록을 생성합니다.

<img src="https://huggingface.co/datasets/agents-course/course-images/resolve/main/en/unit1/code-vs-json-actions.png" alt="Code Agents" />

이 접근법은 몇 가지 장점을 제공합니다.

- ** 표현성 : ** 코드는 자연스럽게 루프, 조건부 및 중첩 함수를 포함한 복잡한 논리를 나타낼 수 있으며, JSON보다 유연성이 높아집니다.
- ** 모듈성 및 재사용 성 : ** 생성 된 코드에는 다른 작업이나 작업에서 재사용 할 수있는 함수 및 모듈이 포함될 수 있습니다.
- ** 향상된 디버그 가능성 : ** 잘 정의 된 프로그래밍 구문으로 코드 오류는 종종 감지하고 수정하기가 더 쉽습니다.
- ** 직접 통합 : ** 코드 에이전트는 외부 라이브러리 및 API와 직접 통합하여 데이터 처리 또는 실시간 의사 결정과 같은보다 복잡한 작업을 가능하게합니다.

LLM 생성 코드를 실행하면 신속한 주입에서 유해한 코드 실행에 이르기까지 보안 위험이 발생할 수 있습니다.
그렇기 때문에 기본 보호 장치를 통합하는 'smolagents'와 같은 AI 에이전트 프레임 워크를 사용하는 것이 좋습니다.
If you want to know more about the risks and how to mitigate them, [please have a look at this dedicated section](https://huggingface.co/docs/smolagents/tutorials/secure_code_execution).

예를 들어 날씨를 가져 오는 작업 에이전트가 다음 파이썬 스 니펫을 생성 할 수 있습니다.

```python
# Code Agent Example: Retrieve Weather Information
def get_weather(city):
    import requests
    api_url = f"https://api.weather.com/v1/location/{city}?apiKey=YOUR_API_KEY"
    response = requests.get(api_url)
    if response.status_code == 200:
        data = response.json()
        return data.get("weather", "No weather information available")
    else:
        return "Error: Unable to fetch weather data."

# Execute the function and prepare the final answer
result = get_weather("New York")
final_answer = f"The current weather in New York is: {result}"
print(final_answer)
```

이 예에서 코드 에이전트 :

- API 통화 **를 통해 날씨 데이터를 검색 **,
- 응답을 처리하고
- 그리고 print () 함수를 사용하여 최종 답변을 출력합니다.

이 방법 **는 또한 코드 블록을 명확하게 구분하고 실행이 완료 될 때 (여기서, final_answer를 인쇄함으로써) 신호를 명확하게 구분하여 정지 및 구문 분석 접근법을 따릅니다.

---

우리는 행동이 JSON, 코드 또는 기능 통화를 통해 명확하고 구조화 된 작업을 실행하여 에이전트의 내부 추론과 실제 상호 작용을 연결한다는 것을 배웠습니다.

이 고의적 인 실행은 각 동작이 정지 및 구문 분석 접근법을 통해 정확하고 외부 처리 준비가되도록합니다.다음 섹션에서는 에이전트가 자신의 환경에서 피드백을 캡처하고 통합하는 방법을 확인하기 위해 관찰을 탐색 할 것입니다.

그 후, 우리는 ** 마침내 첫 번째 요원을 만들 준비가 될 것입니다! **






